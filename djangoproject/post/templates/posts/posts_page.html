{% extends 'djangoappone/layout.html' %}
{% load static %}

{% block title %} {{ post.title }} {% endblock title %}

{% block content %}

<section>
    <!-- Title and Likes Row -->
    <div style="display:flex; align-items:center; gap:10px;">
        <h1 style="margin:0;">{{ post.title }}</h1>
        
        {% if user.is_authenticated %}
            <form action="{% url 'post:toggle_like' slug=post.slug %}" 
                  method="post" style="margin:0; display:inline;">
                {% csrf_token %}
                <button type="submit" 
                        style="background:none; border:none; cursor:pointer; line-height:1; padding:0; margin:0;">
                    {% if user in post.likes.all %}
                        <!-- Liked: red heart -->
                        <span style="color:red; font-size:24px;">&#10084;</span>
                    {% else %}
                        <!-- Not liked: outline heart -->
                        <span style="color:white; font-size:27px;">&#9825;</span>
                    {% endif %}
                </button>
            </form>
        {% endif %}
        <span style="font-size:16px; color:white;">{{ post.total_likes }}</span>
    </div>

    <!-- Post body -->
    <p>{{ post.body }}</p>
    <p>{{ post.date }}</p>

    <img class="banner" src="{{ post.banner.url }}" alt="{{ post.title }}">
</section>

{% endblock content %}
